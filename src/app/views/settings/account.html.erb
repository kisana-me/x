<% content_for :title, "口座設定" %>

<h1>口座設定</h1>

<%= button_to "口座退出", signout_path, method: :delete, data: { turbo: false }, style: "display: inline;" %>
<br />

<%= form_with(model: @account, url: settings_account_path, data: { turbo: false }) do |form| %>
  <%= render("shared/error_messages", instead: @account) %>
  <div>
    <%= form.label :name, style: "display: block" %>
    <%= form.text_field :name %>
  </div>
  <div>
    <%= form.label :name_id, style: "display: block" %>
    <%= form.text_field :name_id %>
  </div>
  <div>
    <%= form.label :description, style: "display: block" %>
    <%= form.text_area :description %>
  </div>

  <hr />

  <div>暗証言葉追加・変更</div>
  <div>暗証言葉登録有無: <%= @current_account.password_digest.blank? ? "無" : "有" %></div>
  <div>
    <%= form.label :password, style: "display: block" %>
    <%= form.text_field :password %>
  </div>
  <div>
    <%= form.label :password_confirmation, style: "display: block" %>
    <%= form.password_field :password_confirmation %>
  </div>

  <hr />

  <div>
    <%= form.submit '更新' %>
  </div>
<% end %>

<br />
<br />

<h2>ANYUR連携</h2>
<% if @current_account.valid_anyur_account.present? %>
  <p>ANYUR連携済</p>
  区分: <%= I18n.t("general.subscription.status.#{@current_account.subscription_plan}") %>
<% else %>
  <p>ANYUR未連携</p>
  <%= button_to "ANYUR連携", oauth_start_path, method: :post, data: { turbo: false }, style: "display: inline;" %>
  区分: ベーシック
<% end %>

<br />
<br />

<%= button_to "口座削除", settings_leave_path, method: :delete, data: { turbo: false }, style: "display: inline;" %>
