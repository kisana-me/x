<% content_for :title, "口座設定" %>

<h1>口座設定</h1>

<%= button_to "口座退出", signout_path, method: :delete, data: { turbo: false }, style: "display: inline;" %>
<br />

<%= form_with(model: @account, url: settings_account_path, data: { turbo: false }) do |form| %>
  <%= render("shared/error_messages", instead: @account) %>
  <div>
    <%= form.label :name, style: "display: block" %>
    <%= form.text_field :name %>
  </div>
  <div>
    <%= form.label :name_id, style: "display: block" %>
    <%= form.text_field :name_id %>
  </div>
  <div>
    <%= form.label :description, style: "display: block" %>
    <%= form.text_area :description %>
  </div>
  <div>
    <%= form.submit '更新' %>
  </div>
<% end %>

<br />
<br />

<h2>ANYUR連携</h2>
<% if @current_account.anyur_id.present? %>
  <p>ANYUR連携済</p>
  plan:<%= @current_account.meta.dig("subscription", "plan") || "unknown" %>
<% else %>
  <p>ANYUR未連携</p>
  <%= button_to "ANYUR連携", oauth_path, method: :post, data: { turbo: false }, style: "display: inline;" %>
  plan: basic
<% end %>

<br />
<br />

<%= button_to "口座削除", settings_leave_path, method: :delete, data: { turbo: false }, style: "display: inline;" %>
